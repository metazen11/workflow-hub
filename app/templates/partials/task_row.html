<!-- Task Row Partial - Include with {% include 'partials/task_row.html' with task=task show_edit=True %} -->
<div class="task-row {% if task.linked_to_run %}linked-to-run{% endif %}">
    <div class="task-info">
        <span class="task-id">{{ task.task_id }}</span>
        <a href="/ui/task/{{ task.id }}/" class="task-title">{{ task.title }}</a>
        <span class="badge badge-{{ task.status_class }}">{{ task.status|upper }}</span>
        {% if task.linked_to_run %}
        <span class="badge badge-info" title="Task linked to this run">RUN</span>
        {% endif %}
    </div>
    <div class="task-actions">
        {% if show_edit %}
        <button class="btn btn-sm edit-task-btn"
            data-task-id="{{ task.id }}"
            data-title="{{ task.title }}"
            data-description="{{ task.description }}"
            data-priority="{{ task.priority }}"
            data-status="{{ task.status }}"
            data-blocked-by="{{ task.blocked_by }}"
            data-acceptance="{{ task.acceptance_criteria }}">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Edit
        </button>
        {% endif %}
        <!-- Delete button (inlined to avoid recursion) -->
        <button class="btn btn-sm btn-danger delete-task-btn"
            data-task-id="{{ task.id }}"
            data-title="{{ task.title }}"
            title="Delete task">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
        </button>
    </div>
</div>
