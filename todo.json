{
  "project": "Workflow Hub",
  "description": "Local-first web app for managing agentic software development cycles",
  "last_updated": "2025-12-26T23:30:00Z",
  "tasks": [
    {
      "id": "WH-001",
      "title": "Implement pipeline state monitoring via Playwright",
      "status": "done",
      "priority": 1,
      "description": "E2E tests to verify run states progress, handoffs work, and database fields are populated",
      "acceptance_criteria": [
        "Playwright tests check API health",
        "Tests verify run state transitions",
        "Tests verify tasks are created and linked",
        "Tests verify UI renders correctly"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-002",
      "title": "Add auto git repo initialization on run creation",
      "status": "done",
      "priority": 1,
      "description": "Automatically initialize git repository when creating a new run for a project",
      "acceptance_criteria": [
        "RunService.create_run() calls _ensure_git_repo()",
        "Git repo created if repo_path exists and no .git dir",
        ".gitignore created with common patterns",
        "Initial commit created automatically"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-003",
      "title": "Fix project_create API to save all fields",
      "status": "done",
      "priority": 1,
      "description": "project_create was only saving name, description, repo_path, stack_tags. Now saves all 20+ Project model fields.",
      "acceptance_criteria": [
        "All Project model fields saved on create",
        "Tests verify all fields persist",
        "API returns complete project data"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-004",
      "title": "PyCRUD project creation and run setup",
      "status": "done",
      "priority": 2,
      "description": "Created PyCRUD project with comprehensive requirements matching ajaxCRUD, with 16 implementation tasks",
      "acceptance_criteria": [
        "Project created with all metadata fields",
        "Run #432 created in PM state",
        "16 tasks created with acceptance criteria",
        "Tasks linked to run"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-005",
      "title": "Agent auto-trigger system",
      "status": "done",
      "priority": 1,
      "description": "When AUTO_TRIGGER_AGENTS=true, automatically trigger next agent when run state changes",
      "acceptance_criteria": [
        "PM agent triggered on run creation",
        "DEV agent triggered after PM passes",
        "QA agent triggered after DEV passes",
        "SEC agent triggered after QA passes",
        "Pipeline advances automatically"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-006",
      "title": "Implement DRY task UI components",
      "status": "done",
      "priority": 2,
      "description": "Shared templates and JS for task operations",
      "acceptance_criteria": [
        "task_row.html partial created",
        "task_delete.html partial created",
        "task-actions.js shared module",
        "Event delegation for delete handlers"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-007",
      "title": "Test database isolation",
      "status": "done",
      "priority": 1,
      "description": "Tests use wfhub_test database instead of production",
      "acceptance_criteria": [
        "conftest.py overrides DATABASE_URL before Django setup",
        "Tests run against wfhub_test",
        "Production data preserved",
        "load_dotenv(override=False) in app/db"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-008",
      "title": "Create coding principles documentation",
      "status": "done",
      "priority": 2,
      "description": "Document coding standards, TDD requirements, and development workflow",
      "acceptance_criteria": [
        "coding_principles.md created",
        "TDD workflow documented",
        "DRY principles documented",
        "Referenced in CLAUDE.md"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-009",
      "title": "Periodic pipeline monitoring",
      "status": "pending",
      "priority": 3,
      "description": "Set up recurring checks every 5 minutes via Playwright",
      "acceptance_criteria": [
        "Monitor script runs on schedule",
        "Alerts on stuck pipelines",
        "Logs check results"
      ],
      "created": "2025-12-26"
    },
    {
      "id": "WH-010",
      "title": "Create RoleConfig model for agent prompts in DB",
      "status": "done",
      "priority": 1,
      "description": "Store agent roles and prompts in database instead of hardcoding in agent_runner.py. Follow DRY principle.",
      "acceptance_criteria": [
        "RoleConfig model with role, name, description, prompt, checks, requires_approval, active fields",
        "Alembic migration created and applied",
        "All existing roles seeded: director, pm, dev, qa, security, docs, cicd",
        "Test: test_all_roles_have_config()"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-011"],
      "completed": "2025-12-26"
    },
    {
      "id": "WH-011",
      "title": "Write tests for RoleConfig model (TDD)",
      "status": "done",
      "priority": 1,
      "description": "TDD - Write tests first before implementing RoleConfig model",
      "acceptance_criteria": [
        "test_role_config_model.py created",
        "test_all_roles_have_config() - every AgentRole has RoleConfig",
        "test_prompts_have_required_sections() - prompts are valid",
        "test_director_checks_are_valid() - enforcement rules valid JSON",
        "Tests fail initially (Red phase)"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-26"
    },
    {
      "id": "WH-012",
      "title": "Add DIRECTOR and CICD to AgentRole enum",
      "status": "done",
      "priority": 1,
      "description": "Extend AgentRole enum with new roles",
      "acceptance_criteria": [
        "AgentRole.DIRECTOR added",
        "AgentRole.DOCS added",
        "AgentRole.CICD added",
        "Alembic migration for enum update"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-011"],
      "completed": "2025-12-26"
    },
    {
      "id": "WH-013",
      "title": "Refactor agent_runner.py to load prompts from DB",
      "status": "done",
      "priority": 1,
      "description": "Remove hardcoded ROLE_PROMPTS, load from role_configs table",
      "acceptance_criteria": [
        "get_agent_prompt(role, db) function loads from DB",
        "ROLE_PROMPTS dict removed",
        "BASE_INSTRUCTIONS moved to DB or shared config",
        "Tests pass with DB-loaded prompts"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-010"],
      "completed": "2025-12-26"
    },
    {
      "id": "WH-014",
      "title": "Implement Director service daemon",
      "status": "done",
      "priority": 1,
      "description": "Background service that supervises pipeline, enforces standards, course corrects agents",
      "acceptance_criteria": [
        "Director runs as daemon (agent_runner.py daemon)",
        "Polls task queue for work",
        "Reviews agent outputs before stage advancement",
        "Enforces coding_principles checks",
        "Sends work back if standards not met",
        "Graceful start/stop"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-013"],
      "completed": "2025-12-27"
    },
    {
      "id": "WH-015",
      "title": "Implement CICD agent with approval gate",
      "status": "done",
      "priority": 2,
      "description": "Deployment agent that requires human approval. After DOCS passes: commit to branch, merge to prod, push.",
      "acceptance_criteria": [
        "CICD agent prompt in DB",
        "requires_approval=True for CICD role",
        "Human approval UI in dashboard",
        "CICD only runs after explicit approval",
        "Commit changes to feature branch",
        "Merge to production branch (with approval)",
        "Push to remote repository",
        "Deployment to dev/staging/production environments"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-27",
      "blocked_by": ["WH-013"]
    },
    {
      "id": "WH-016",
      "title": "Add Director GUI controls to dashboard",
      "status": "done",
      "priority": 2,
      "description": "UI controls to start/stop Director service and view status",
      "acceptance_criteria": [
        "Director status indicator (running/stopped)",
        "Start/Stop buttons",
        "Settings panel (poll interval, enforcement toggles)",
        "View logs/activity",
        "Tasks reviewed count"
      ],
      "created": "2025-12-26",
      "completed": "2025-12-27",
      "blocked_by": ["WH-014"]
    },
    {
      "id": "WH-017",
      "title": "Hybrid task/run pipeline flow",
      "status": "pending",
      "priority": 2,
      "description": "Support both full project runs and individual task progression through pipeline",
      "acceptance_criteria": [
        "Tasks can flow DEV→QA→SEC→DOCS→COMPLETE individually",
        "Run-level still works for full project execution",
        "Director orchestrates both flows",
        "UI shows task-level pipeline stage"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-014"]
    },
    {
      "id": "WH-018",
      "title": "Test Director with PyCRUD pipeline",
      "status": "pending",
      "priority": 2,
      "description": "End-to-end test of Director supervising PyCRUD project completion",
      "acceptance_criteria": [
        "Run 432 resumes with Director oversight",
        "Director enforces standards on each stage",
        "Security issues get fixed before advancing",
        "Tasks progress through all stages",
        "Project reaches DEPLOYED state"
      ],
      "created": "2025-12-26",
      "blocked_by": ["WH-017"]
    },
    {
      "id": "WH-019",
      "title": "Agent-to-agent communication via MCP (FUTURE)",
      "status": "pending",
      "priority": 3,
      "description": "Agents can resolve problems themselves and ask Director questions before escalating to human. MCP tools for inter-agent communication.",
      "acceptance_criteria": [
        "Agents can call each other via MCP tools",
        "Task ID passed to build context (task info, project info, history)",
        "WH provides context to LLM via MCP",
        "Agents ask Director for clarification before escalating to human",
        "Question/answer flow tracked in task history"
      ],
      "created": "2025-12-26",
      "notes": "DESIGN PHASE - Still figuring out architecture. Do not implement yet."
    },
    {
      "id": "WH-020",
      "title": "Enhanced task list with filtering and selection",
      "status": "pending",
      "priority": 2,
      "description": "Task lists should be DRY, queryable by project with status/priority filtering. Users can select tasks to run them through the pipeline.",
      "acceptance_criteria": [
        "Task list shows status and priority",
        "Tasks queryable by project_id",
        "Filter by status (backlog, in_progress, done)",
        "Filter by priority",
        "Multi-select tasks in UI",
        "Run selected tasks (delegates to pipeline)",
        "DRY - reusable task list component"
      ],
      "created": "2025-12-26"
    },
    {
      "id": "WH-021",
      "title": "Role Config seeding and environment setup",
      "status": "done",
      "priority": 1,
      "description": "Ensure role configurations (agent prompts) are seeded to DB during new environment setup. Reconcile coding_principles with seed script.",
      "acceptance_criteria": [
        "scripts/seed_role_configs.py runs during setup",
        "CLAUDE.md quick start includes seed command",
        "Alembic migration seeds role_configs as backup",
        "All 7 roles seeded: director, pm, dev, qa, security, docs, cicd",
        "coding_principles referenced in seed prompts"
      ],
      "created": "2025-12-27",
      "completed": "2025-12-31"
    },
    {
      "id": "WH-022",
      "title": "Dashboard bug fixes and task modal (DRY)",
      "status": "done",
      "priority": 1,
      "description": "Fix dashboard bugs: extra closing divs, missing killRun(), add shared task modal partial",
      "acceptance_criteria": [
        "partials/task_modal.html created for DRY",
        "static/js/task-modal.js for shared modal logic",
        "Dashboard uses shared partial",
        "killRun() function added",
        "New task form works"
      ],
      "created": "2025-12-27",
      "completed": "2025-12-27"
    },
    {
      "id": "WH-023",
      "title": "Proof-of-work folder system for agent evidence",
      "status": "done",
      "priority": 2,
      "description": "Local folder structure for agents to save evidence (screenshots, logs, reports). Ready for S3/cloud migration.",
      "acceptance_criteria": [
        "ProofService class with save/list/clear methods",
        "Folder structure: workspaces/{project}/proof/runs/{id}/{stage}/",
        "API endpoints for upload/list/view proofs",
        "UI integration in task and run detail pages",
        "Proof requirements added to agent prompts"
      ],
      "created": "2025-12-27",
      "completed": "2025-12-27"
    },
    {
      "id": "WH-024",
      "title": "Complete project documentation",
      "status": "pending",
      "priority": 5,
      "description": "Document all API endpoints, UI features, architecture decisions, and usage guides",
      "acceptance_criteria": [
        "README updates",
        "API documentation",
        "Developer onboarding guide"
      ],
      "created": "2025-12-27"
    },
    {
      "id": "WH-025",
      "title": "UI polish - responsive dashboard",
      "status": "pending",
      "priority": 6,
      "description": "Fix dashboard width issues - should stay within browser viewport without horizontal scrolling. Make all UI tables filterable and responsive.",
      "acceptance_criteria": [
        "Dashboard fits browser viewport",
        "No horizontal scrolling",
        "Tables are filterable",
        "Consistent styling across views"
      ],
      "created": "2025-12-27"
    },
    {
      "id": "WH-026",
      "title": "Automated E2E pipeline test",
      "status": "pending",
      "priority": 7,
      "description": "After CI: Create fully automated end-to-end test that runs a feature through the entire pipeline without human interaction",
      "acceptance_criteria": [
        "Playwright test simulates full pipeline",
        "DEV→QA→SEC→DOCS→COMPLETE automated",
        "Agent reports simulated",
        "State transitions verified"
      ],
      "created": "2025-12-27"
    },
    {
      "id": "WH-027",
      "title": "Bug reports as tasks integration",
      "status": "pending",
      "priority": 6,
      "description": "Bug reports created via the widget should also appear as tasks in the project task list",
      "acceptance_criteria": [
        "Bug widget remains separate UI",
        "Bugs can be converted to tasks",
        "Tasks track original bug reference",
        "Pipeline flow for bug-derived tasks"
      ],
      "created": "2025-12-27"
    },
    {
      "id": "WH-028",
      "title": "Systematic UI fix - view by view validation",
      "status": "pending",
      "priority": 1,
      "description": "Methodically go through each view, fix confirmation dialogs, button handlers, auto-refresh conflicts, and ensure each view works completely before moving on",
      "acceptance_criteria": [
        "Dashboard view - all buttons work correctly",
        "Project detail view - all actions work",
        "Run detail view - all controls work",
        "Task detail view - Run Agent works without page reload",
        "Task board view - drag and drop works",
        "Bug list/detail views - all actions work",
        "No confirmation dialog issues",
        "No auto-refresh interference"
      ],
      "created": "2025-12-27"
    },
    {
      "id": "WH-029",
      "title": "Reusable editable/filterable table component (PyCRUD-style)",
      "status": "pending",
      "priority": 4,
      "description": "Create a reusable table component like ajaxCRUD that auto-generates editable tables with sorting, filtering, inline editing, AJAX save",
      "acceptance_criteria": [
        "create_editable_filterable_table(table_name, params) helper",
        "Auto-detect column types and render appropriate controls",
        "Sorting by any column",
        "Filtering/search across columns",
        "Double-click inline editing",
        "AJAX save on edit",
        "Row-level operations (delete, actions)",
        "Pagination support"
      ],
      "created": "2025-12-27",
      "notes": "Inspired by ajaxCRUD PHP library - create Python equivalent for Django"
    },
    {
      "id": "WH-030",
      "title": "AJAX-based component refresh (no full page reloads)",
      "status": "pending",
      "priority": 2,
      "description": "Each UI component should refresh individually via AJAX instead of full page reloads. Disable auto-refresh globally and implement targeted data fetching.",
      "acceptance_criteria": [
        "Disable auto-refresh on all views by default",
        "Task status changes update badge in-place",
        "Run state changes update status indicator only",
        "Proof-of-work sections load/reload independently",
        "Activity logs append new entries without refresh",
        "Agent run status polls and updates specific elements",
        "No full page reloads except navigation"
      ],
      "created": "2025-12-30"
    },
    {
      "id": "WH-031",
      "title": "Proof-of-work database tracking with task history API",
      "status": "done",
      "priority": 1,
      "description": "Hybrid proof storage: files in filesystem + metadata in database. Proofs linked to tasks (not just runs) for agent memory. API provides task/project proof history.",
      "acceptance_criteria": [
        "Proof model with task_id as primary key",
        "run_id optional for context",
        "Upload saves metadata to DB",
        "GET /api/tasks/{id}/proof-history returns all proofs for task",
        "GET /api/projects/{id}/proof-history returns project-wide proofs",
        "Backfill existing filesystem proofs to DB",
        "Agent-friendly compact response format (to_agent_context)"
      ],
      "created": "2025-12-30",
      "completed": "2025-12-31"
    },
    {
      "id": "WH-032",
      "title": "Simple completion tool for agents (bypass Goose)",
      "status": "pending",
      "priority": 3,
      "description": "For simple tasks (docs enrichment, wizards, questions), agents should have a lightweight tool to get completions directly without invoking full Goose agent. Useful when agent needs feedback or has to ask a question.",
      "acceptance_criteria": [
        "MCP tool for simple LLM completions",
        "Agent can call for quick answers/feedback",
        "Does not spawn full agent process",
        "Configurable model (haiku for simple, sonnet for complex)",
        "Used for docs enrichment, wizard steps, clarification",
        "Reduces latency and cost for simple operations"
      ],
      "created": "2025-12-30",
      "notes": "Consider using Claude API directly or lightweight SDK call"
    },
    {
      "id": "WH-033",
      "title": "API-based Handoff system with DB tracking",
      "status": "done",
      "priority": 1,
      "description": "Handoffs stored in database with full lifecycle tracking. Task-centric design allows tasks to progress independently through pipeline stages.",
      "acceptance_criteria": [
        "Handoff model with task_id as primary key",
        "HandoffStatus enum: pending, in_progress, completed, failed, skipped",
        "API endpoints: GET/POST handoff, accept, complete, fail, history",
        "agent_runner.py integrated with handoff API",
        "run_service creates handoffs on advance",
        "UI shows handoff history in task detail page"
      ],
      "created": "2025-12-31",
      "completed": "2025-12-31"
    },
    {
      "id": "WH-034",
      "title": "Vision LLM service for screenshot analysis",
      "status": "done",
      "priority": 2,
      "description": "Service to analyze screenshots using multimodal vision models. Caching system avoids redundant API calls.",
      "acceptance_criteria": [
        "get_image_description() with caching",
        "enrich_text_with_image_descriptions() for handoff context",
        "Director settings: include_images, vision_model",
        "Uses Docker Model Runner with qwen3-vl via base64 API",
        "Cache in .cache/image_descriptions/ keyed by path+mtime"
      ],
      "created": "2025-12-31",
      "completed": "2025-12-31"
    }
  ]
}
